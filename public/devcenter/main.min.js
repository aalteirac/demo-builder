var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.arrayFromIterator=function(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c};
$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function c(a){return a instanceof e?a:new e(function(b,c){b(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;b.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};b.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var d=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(a){d(a,
0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var c=a[b];a[b]=null;try{c()}catch(l){this.asyncThrow_(l)}}}this.batch_=null};b.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var e=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(h){b.reject(h)}};e.prototype.createResolveAndReject_=
function(){function a(a){return function(d){c||(c=!0,a.call(b,d))}}var b=this,c=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};e.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof e)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};e.prototype.resolveToNonPromiseObj_=function(a){var b=
void 0;try{b=a.then}catch(h){this.reject_(h);return}"function"==typeof b?this.settleSameAsThenable_(b,a):this.fulfill_(a)};e.prototype.reject_=function(a){this.settle_(2,a)};e.prototype.fulfill_=function(a){this.settle_(1,a)};e.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};e.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=
0;a<this.onSettledCallbacks_.length;++a)f.asyncExecute(this.onSettledCallbacks_[a]);this.onSettledCallbacks_=null}};var f=new b;e.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};e.prototype.settleSameAsThenable_=function(a,b){var c=this.createResolveAndReject_();try{a.call(b,c.resolve,c.reject)}catch(l){c.reject(l)}};e.prototype.then=function(a,b){function c(a,b){return"function"==typeof a?function(b){try{d(a(b))}catch(n){g(n)}}:
b}var d,g,f=new e(function(a,b){d=a;g=b});this.callWhenSettled_(c(a,d),c(b,g));return f};e.prototype.catch=function(a){return this.then(void 0,a)};e.prototype.callWhenSettled_=function(a,b){function c(){switch(d.state_){case 1:a(d.result_);break;case 2:b(d.result_);break;default:throw Error("Unexpected state: "+d.state_);}}var d=this;null==this.onSettledCallbacks_?f.asyncExecute(c):this.onSettledCallbacks_.push(c)};e.resolve=c;e.reject=function(a){return new e(function(b,c){c(a)})};e.race=function(a){return new e(function(b,
d){for(var e=$jscomp.makeIterator(a),g=e.next();!g.done;g=e.next())c(g.value).callWhenSettled_(b,d)})};e.all=function(a){var b=$jscomp.makeIterator(a),d=b.next();return d.done?c([]):new e(function(a,e){function g(b){return function(c){h[b]=c;f--;0==f&&a(h)}}var h=[],f=0;do h.push(void 0),f++,c(d.value).callWhenSettled_(g(h.length-1),e),d=b.next();while(!d.done)})};return e},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};
$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(a){this.abruptCompletion_={return:a};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};$jscomp.generator.Context.prototype.yieldAll=function(a,b){a=$jscomp.makeIterator(a);var c=a.next();$jscomp.generator.ensureIteratorResultIsObject_(c);if(c.done)this.yieldResult=c.value,this.nextAddress=b;else return this.yieldAllIterator_=a,this.yield(c.value,b)};
$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,b,c){c?this.finallyContexts_[c]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,b){b=this.finallyContexts_.splice(b||0)[0];if(b=this.abruptCompletion_=this.abruptCompletion_||b){if(b.isException)return this.jumpToErrorHandler_();void 0!=b.jumpTo&&this.finallyAddress_<b.jumpTo?(this.nextAddress=b.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};
$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};
$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(a){return{value:a,done:!0}},a,this.context_.return);this.context_.return(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,b,c){try{var d=a.call(this.context_.yieldAllIterator_,b);$jscomp.generator.ensureIteratorResultIsObject_(d);if(!d.done)return this.context_.stop_(),d;var e=d.value}catch(f){return this.context_.yieldAllIterator_=null,this.context_.throw_(f),this.nextStep_()}this.context_.yieldAllIterator_=null;c.call(this.context_,e);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this.throw=function(b){return a.throw_(b)};this.return=function(b){return a.return_(b)};$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,b){b=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b));$jscomp.setPrototypeOf&&$jscomp.setPrototypeOf(b,a.prototype);return b};
$jscomp.asyncExecutePromiseGenerator=function(a){function b(b){return a.next(b)}function c(b){return a.throw(b)}return new Promise(function(d,e){function f(a){a.done?d(a.value):Promise.resolve(a.value).then(b,c).then(f,e)}f(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};
$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={},b=Object.create(new $jscomp.global.Proxy(a,{get:function(c,d,e){return c==a&&"q"==d&&e==b}}));return!0===b.q}catch(c){return!1}};
$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};
$jscomp.polyfill("WeakMap",function(a){function b(){if(!a||!Object.seal)return!1;try{var b=Object.seal({}),c=Object.seal({}),d=new a([[b,2],[c,3]]);if(2!=d.get(b)||3!=d.get(c))return!1;d.delete(b);d.set(c,4);return!d.has(b)&&4==d.get(c)}catch(q){return!1}}function c(){}function d(a){if(!$jscomp.owns(a,f)){var b=new c;$jscomp.defineProperty(a,f,{value:b})}}function e(a){var b=Object[a];b&&(Object[a]=function(a){if(a instanceof c)return a;d(a);return b(a)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&
$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;var f="$jscomp_hidden_"+Math.random();e("freeze");e("preventExtensions");e("seal");var g=0,k=function(a){this.id_=(g+=Math.random()+1).toString();if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};k.prototype.set=function(a,b){d(a);if(!$jscomp.owns(a,f))throw Error("WeakMap key fail: "+a);a[f][this.id_]=b;return this};k.prototype.get=function(a){return $jscomp.owns(a,f)?a[f][this.id_]:void 0};k.prototype.has=
function(a){return $jscomp.owns(a,f)&&$jscomp.owns(a[f],this.id_)};k.prototype.delete=function(a){return $jscomp.owns(a,f)&&$jscomp.owns(a[f],this.id_)?delete a[f][this.id_]:!1};return k},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){function b(){if($jscomp.ASSUME_NO_NATIVE_MAP||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),c=new a($jscomp.makeIterator([[b,"s"]]));if("s"!=c.get(b)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var d=c.entries(),e=d.next();if(e.done||e.value[0]!=b||"s"!=e.value[1])return!1;e=d.next();return e.done||4!=e.value[0].x||"t"!=e.value[1]||!d.next().done?!1:!0}catch(p){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;$jscomp.initSymbolIterator();var c=new WeakMap,d=function(a){this.data_={};this.head_=g();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};d.prototype.set=function(a,b){a=0===a?0:a;var c=e(this,a);c.list||(c.list=this.data_[c.id]=[]);c.entry?c.entry.value=b:(c.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,
value:b},c.list.push(c.entry),this.head_.previous.next=c.entry,this.head_.previous=c.entry,this.size++);return this};d.prototype.delete=function(a){a=e(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};d.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=g();this.size=0};d.prototype.has=function(a){return!!e(this,a).entry};
d.prototype.get=function(a){return(a=e(this,a).entry)&&a.value};d.prototype.entries=function(){return f(this,function(a){return[a.key,a.value]})};d.prototype.keys=function(){return f(this,function(a){return a.key})};d.prototype.values=function(){return f(this,function(a){return a.value})};d.prototype.forEach=function(a,b){for(var c=this.entries(),d;!(d=c.next()).done;)d=d.value,a.call(b,d[1],d[0],this)};d.prototype[Symbol.iterator]=d.prototype.entries;var e=function(a,b){var d=b&&typeof b;"object"==
d||"function"==d?c.has(b)?d=c.get(b):(d=""+ ++k,c.set(b,d)):d="p_"+b;var e=a.data_[d];if(e&&$jscomp.owns(a.data_,d))for(a=0;a<e.length;a++){var g=e[a];if(b!==b&&g.key!==g.key||b===g.key)return{id:d,list:e,index:a,entry:g}}return{id:d,list:e,index:-1,entry:void 0}},f=function(a,b){var c=a.head_;return $jscomp.iteratorPrototype(function(){if(c){for(;c.head!=a.head_;)c=c.previous;for(;c.next!=c.head;)return c=c.next,{done:!1,value:b(c)};c=null}return{done:!0,value:void 0}})},g=function(){var a={};return a.previous=
a.next=a.head=a},k=0;return d},"es6","es3");
var VERSION="1.02",DEFAULT_SETTINGS="default",NO_FILTER_TEXT="Activate View at Least Once to Setup...",WARNTABS="This workbook has hidden tabs, switching views and keeping filter state could not be possible ! Consider changing to 'Tabbed Views'.",currentTemplate,crossMessageHandler,magicGrid,pickers=[],panelSet,viewsModified=!1,curSearch,curSearchVarC,isTemplateLoaded,friendlyTpName={"templates/grid/index.html":"Horizontal","templates/gridV/index.html":"Vertical","templates/bs/index.html":"BootStrap",
"templates/gridstack/index.html":"Widgets","templates/marketplace/index.html":"Market_Place"};Window.prototype._addEventListener=Window.prototype.addEventListener;Window.prototype.addEventListener=function(a,b,c){"message"===a&&(crossMessageHandler=b);void 0==c&&(c=!1);this._addEventListener(a,b,c);this.eventListenerList||(this.eventListenerList={});this.eventListenerList[a]||(this.eventListenerList[a]=[]);this.eventListenerList[a].push({listener:b,options:c})};
function addNewIframeListener(){for(var a=0;a<$("iframe").length;a++)$("iframe")[a].contentWindow.addEventListener("message",crossMessageHandler,!0)}
function init(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return $(".tdropdown").addClass("active"),$(".tdropsub").show(),$("#file").on("change",function(a){restoreFromFile(this.files)}),window.onresize=function(a){$("body").height();a=1==isTableauPublic()?$("body").height()-460:$("body").height()-696;316>a&&(a=316);$(".tb").css("max-height",a)},$(".sidebar-dropdown.tdropdown > a").click(function(){var a=this;$(".sidebar-submenu:not(.tdropsub)").slideUp(150);
setTimeout(function(){$(a).parent().hasClass("active")?($(a).parent().removeClass("active"),$(".sidebar-submenu.tdropsub").slideUp(150)):($(a).next(".sidebar-submenu").slideDown(200),$(a).parent().addClass("active"),$(".sidebar-submenu .thumb.templ").css("display","flex"),$(".sidebar-submenu details").css("display","block"),$(".sidebar-submenu details summary").css("display","list-item"),$(".sidebar-dropdown:not(.tdropdown)").removeClass("active"))},150)}),$(".sidebar-dropdown:not(.tdropdown) > a").click(function(){var a=
this;$(".sidebar-submenu:not(.tdropsub)").slideUp(150);$(".sidebar-submenu.tdropsub").slideDown(200);setTimeout(function(){$(".sidebar-submenu .thumb.templ:not(.active)").css("display","none");$(".sidebar-submenu details").css("display","none");$(".sidebar-submenu details[open]:has(> .active)").css("display","block");$(".sidebar-submenu details[open]:has(> .active) summary").css("display","none");$(".sidebar-submenu.tdropsub").addClass("active");if($(a).parent().hasClass("active"))$(a).parent().removeClass("active");
else if($(".sidebar-dropdown").removeClass("active"),$(a).next(".sidebar-submenu").slideDown(200),$(a).parent().addClass("active"),$(a).parent().hasClass("vdropdown")){var b=new Event("resize");b.fake=!0;window.dispatchEvent(b)}},150)}),$("#close-sidebar .fa-bars").click(function(){$(".page-wrapper").removeClass("toggled")}),$("#show-sidebar").click(function(){$(".page-wrapper").addClass("toggled")}),localStorage.getItem("VERSION")==VERSION?a.jumpTo(2):a.yield(restoreFromUrl(DEFAULT_SETTINGS,!1),
3);initModal();null==localStorage.getItem("WARN")&&showModal("modal-warn");1==checkSettings()?($(".init").show(),$(".tabpub input").prop("checked",!1),getProjects()):(showSettings(),$(".tdropdown").show(),$(".tabpub").show(),$(".vdropdown").show(),$(".sidebar-search").show(),$(".tabpub input").prop("checked",!0));currentTemplate="templates/grid/index.html";restoreViz();initHelpVideo();a.jumpToEnd()})}
function initHelpVideo(){$("[data-media]").on("click",function(a){a.preventDefault();a=$(this).attr("data-media");$(".popup").find("iframe").attr("src",a);$("body").addClass("show-popup")});$(".popup").on("click",function(a){a.preventDefault();a.stopPropagation();$("body").removeClass("show-popup")});$(".popup > iframe").on("click",function(a){a.stopPropagation()})}function closeWarn(){MicroModal.close("modal-warn");localStorage.setItem("WARN","agree");window.location.reload()}
function highlightElementbyCSSColor(a){a=document.getElementById("template").contentWindow.document.querySelectorAll("*");Array.prototype.forEach.call(a,function(a){(a.style.color||"").replace(/\s/g,"").toLowerCase();console.log(getComputedStyle(a).color)})}
function checkSettings(){return""!=localStorage.getItem("SERVER_URL")&&""!=localStorage.getItem("SITE_NAME")&&""!=localStorage.getItem("TOKEN_NAME")&&""!=localStorage.getItem("TOKEN_VALUE")&&null!=localStorage.getItem("SERVER_URL")&&null!=localStorage.getItem("SITE_NAME")&&null!=localStorage.getItem("TOKEN_NAME")&&null!=localStorage.getItem("TOKEN_VALUE")}
function initModal(){MicroModal.init({openTrigger:"data-custom-open",closeTrigger:"data-custom-close",disableScroll:!0,disableFocus:!1,awaitCloseAnimation:!0,awaitOpenAnimation:!0,debugMode:!1})}function dropFile(a){$(this).removeClass("dragging");a.preventDefault();a.stopPropagation();var b=a.dataTransfer||a.originalEvent&&a.originalEvent.dataTransfer;restoreFromFile(a.target.files||b&&b.files)}
function showModal(a){MicroModal.show(a,{onClose:function(){$("#template").contents().find("iframe").fadeIn(200)}})}function openViewsPanel(){$(".sidebar-dropdown").removeClass("active");$(".pdropsub").slideUp(200);$(".vdropdown").addClass("active");$(".vdropsub").slideDown(200)}function clearItems(){$(".tb").empty();$(".vnum").text("");$(".pnum").text("");$(".projects").empty()}
function giveMeSalt(a){return new Promise(function(b,c){c=formize({token:a});fetch("/salt",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:c}).then(function(a){return a.json()}).then(function(a){b(a.salted)})})}
function saveSettings(){var a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(giveMeSalt($("#tokValue").val()),2);a=b.yieldResult;localStorage.setItem("SERVER_URL",$("#servurl").val());localStorage.setItem("SITE_NAME",$("#siteName").val());localStorage.setItem("TOKEN_NAME",$("#tokName").val());localStorage.setItem("TOKEN_VALUE",a);localStorage.setItem("VERSION",VERSION);$(".tabpub input").prop("checked",!1);1!=checkSettings()||isTableauPublic()?togglePublic():
(closeAllMenu(),clearItems(),$(".init").show(),$(".tdropdown").addClass("active"),$(".tdropsub").show(),getProjects());MicroModal.close("modal-settings");b.jumpToEnd()})}
function showSettings(){$("#template").contents().find("iframe").fadeOut(200);$("#servurl").val(localStorage.getItem("SERVER_URL"));$("#siteName").val(localStorage.getItem("SITE_NAME"));$("#tokName").val(localStorage.getItem("TOKEN_NAME"));$("#tokValue").val(localStorage.getItem("TOKEN_VALUE"));showModal("modal-settings");$(".gogo").focus()}
function saveToFile(a){var b=JSON.stringify(localStorage);b=b.replaceAll('\\"',"'");b=new Blob([b],{type:"text/plain;charset=utf-8"});var c=new Date;c=("0"+c.getDate()).slice(-2)+"-"+("0"+(c.getMonth()+1)).slice(-2)+"-"+c.getFullYear()+"--"+("0"+c.getHours()).slice(-2)+"h"+("0"+c.getMinutes()).slice(-2);a?saveAs(b,a.replaceAll(".zip","").replaceAll(".txt","")+".txt"):saveAs(b,"myConfig_"+c+".txt")}
function reloadMe(a){a=void 0===a?!1:a;var b=4;$(".text_drop").css("color","#4d5ee0");$(".text_drop").css("font-weight","bolder");$(".text_drop").text("Page will reload in "+b+" seconds !");setInterval(function(){--b;$(".text_drop").text("Page will reload in "+b+" second"+(1<b?"s !":"  !"))},1E3);setTimeout(function(){window.location.reload()},1==a?100:4100)}
function restoreFromUrl(a,b){b=void 0===b?!0:b;return new Promise(function(c,d){fetch(a+".txt").then(function(a){return a.json()}).then(function(a){localStorage.clear();localStorage.setItem("VERSION",VERSION);for(var d in a)localStorage.setItem(d,a[d]);1==b&&reloadMe();c()})})}
function restoreFromFile(a){for(var b=0,c;c=a[b];b++){var d=new FileReader;d.onload=function(a){try{var b=a.target.result.replaceAll(",\r\n",","),c=JSON.parse(b)}catch(h){alert("File content is wrong..."+h);return}localStorage.clear();for(var d in c)c[d]instanceof Object?localStorage.setItem(d,JSON.stringify(c[d])):localStorage.setItem(d,c[d]);localStorage.setItem("VERSION",VERSION)};d.readAsText(c);reloadMe()}}
function getProjects(){var a=getData();a=formize(a);fetch("/projects",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a}).then(function(a){return a.json()}).then(function(a){populateProjects(a)})}function getWorkbooks(a){var b=getData();b.project=a;a=formize(b);fetch("/workbooks",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a}).then(function(a){return a.json()}).then(function(a){populateWorkbook(a)})}
function getViews(a,b){var c=getData();c.project=a;a=formize(c);fetch("/list",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a}).then(function(a){return a.json()}).then(function(a){populateViews(a,!1,b)})}function getData(){return{host:localStorage.getItem("SERVER_URL"),site:localStorage.getItem("SITE_NAME"),tokenName:localStorage.getItem("TOKEN_NAME"),tokenValue:localStorage.getItem("TOKEN_VALUE")}}
function formize(a){var b=[],c;for(c in a){var d=encodeURIComponent(c),e=encodeURIComponent(a[c]);b.push(d+"="+e)}return b=b.join("&")}function chrono(a,b,c){return new Promise(function(d,e){setTimeout(function(){b.text(a);d(a)},1==c?2:100)})}
function populateWorkbook(a){var b,c,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:$(".twb").empty();$(".tb").empty();$(".twb").show();$(".loadwb").hide();if(a.message)return $(".twb").append('<div class="thumb"> \n          <div class="thumb_text err">'+a.message+"</div>\n      </div>"),e.return();$(".wbnum").css("background-color","#28a745");rawvNum=a.length;b=0;case 2:if(!(b<a.length)){e.jumpTo(4);break}return e.yield(chrono(b+1,$(".wbnum"),30<a.length),
5);case 5:c=a[b];$(".twb").append('<div title="'+c.name+'" id="'+c.id+'" class="thumb wkb" onclick="showViews(\''+c.id+"',this,"+("false"===c.showTabs)+')">\n      <div class="nosel thumb_text">'+titleCase(c.name)+'</div>\n          <i class="check fa fa-check"></i> \n      </div>');b++;e.jumpTo(2);break;case 4:$(".wbnum").css("background-color",""),0<a.length&&(d="false"===a[0].showTabs,showViews(a[0].id,$("#"+a[0].id),d)),e.jumpToEnd()}})}
function populateViews(a,b,c){b=void 0===b?!1:b;var d,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){switch(f.nextAddress){case 1:0==b&&($(".tb").empty(),$(".tb").show());$(".loadview").hide();if(a.message)return $(".tb").append('<div class="thumb"> \n          <div class="thumb_text err">'+a.message+"</div>\n      </div>"),f.return();$(".vnum").css("background-color","#28a745");rawvNum=a.length;d=0;case 2:if(!(d<a.length)){f.jumpTo(4);break}if(0!=b){f.jumpTo(5);break}return f.yield(chrono(d+
1,$(".vnum"),30<a.length),5);case 5:e=a[d];$(".tb").append('<div class="thumb vie"> \n          <div title="'+e.name+'" class="nosel thumb_text">'+e.name+'</div>\n          <img onload="successImage(this)" onerror="retryImage(this)" id="'+e.link+"#!"+e.name+"#!"+e.url+"#!"+c+'"" draggable="true" ondragstart="drag(event)" ondragend="dropEnd(event)" class="thumb_pic" src="'+e.url+'" />\n      </div>');d++;f.jumpTo(2);break;case 4:$(".vnum").css("background-color",""),f.jumpToEnd()}})}
function populateProjects(a){var b,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){switch(d.nextAddress){case 1:$(".projects").empty();$(".loadp").hide();if(a.message)return $(".projects").append('<div class="thumb"> \n          <div class="thumb_text err">'+a.message+"</div>\n      </div>"),$(".pdropdown").addClass("active"),$(".pdropsub").show(),$(".pdropdown .badge").addClass("badge-danger"),$(".pnum").text("!"),d.return();$(".pdropdown .badge").removeClass("badge-danger");$(".pnum").css("background-color",
"#28a745");rawpNum=a.length;b=0;case 2:if(!(b<a.length)){d.jumpTo(4);break}return d.yield(chrono(b+1,$(".pnum")),5);case 5:c=a[b];$(".projects").scrollTop(0);$(".projects").append('<div title="'+c.name+'" id="'+c.id+'" class="thumb proj" onclick="showWorkbook(\''+c.name+'\',this)">\n          <div class="nosel thumb_text">'+titleCase(c.name)+'</div>\n          <i class="check fa fa-check"></i> \n      </div>');b++;d.jumpTo(2);break;case 4:$(".pnum").css("background-color",""),showWorkbook(a[0].name,
$("#"+a[0].id)),$(".wbdropdown").removeClass("active"),$(".wbropsub").hide(),$(".vdropdown").removeClass("active"),$(".vdropsub").hide(),d.jumpToEnd()}})}function successImage(a){a.style.display="inline-block"}function retryImage(a){a.hasOwnProperty("retryCount")||(a.retryCount=0);a.style.display="none";20>a.retryCount?setTimeout(function(){a.src+="?"+a.retryCount;a.retryCount+=1},2E3):a.style.display="inline-block"}
function closeAllMenu(){$(".sidebar-dropdown").removeClass("active");$(".sidebar-submenu").hide()}function switchTemplate(a,b){b&&closeSettings();b&&($(".thumb.templ").removeClass("active"),$(b).addClass("active"),$(".sidebar-menu .sidebar-submenu details .fas").hide(),$(b).find("i").show());$("#template").prop("src",a);currentTemplate=a;disposeAllViz();$("#container").empty();clearInterval(isTemplateLoaded);restoreViz()}
function showViews(a,b,c){$(".thumb.wkb").removeClass("active");$(".vnum").text("");$(".loadview").show();$(b).addClass("active");$(".tb").scrollTop(0);getViews(a,c)}function showWorkbook(a,b){$(".vnum").text("");$(".loadview").show();$(".thumb.proj").removeClass("active");$(".wbnum").text("");$(".loadwb").show();$(b).addClass("active");$(".twb").scrollTop(0);getWorkbooks(a)}function allowDrop(a){a.preventDefault()}
function drag(a){a.dataTransfer.setData("text",a.target.id);$("#template").contents().find("iframe").fadeOut(200)}function getDataSource(a){a.getUnderlyingTablesAsync().then(function(b){options={maxRows:0,ignoreAliases:!1,ignoreSelection:!0,includeAllColumns:!1};a.getUnderlyingTableDataAsync(b[0].getTableId(),options).then(function(a){console.log(a.getData(),a.getColumns())})})}function dropEnd(){$("#template").contents().find("iframe").fadeIn(200)}
function disposeFilters(a){$("div").remove("div [vizf='"+a+"']")}function disposeAllViz(){tableau.VizManager.getVizs().map(function(a){a.dispose();disposeFilters(a.vizid);console.log("Disposing",a.vizid,"for",a.template)})}
function drop(a){a.preventDefault();var b=$(a.currentTarget).attr("varindex"),c=a.dataTransfer.getData("text");clearAView(b);var d=trimURL(getCurrentServerInfo().host)+"/t/"+getCurrentServerInfo().site+"/views/"+c.split("#!")[0].replace("/sheets","");1==isTableauPublic()&&(d=c.split("#!")[2]);1==isTableauPublic()?$(a.currentTarget).attr("value",c.split("#!")[0]):$(a.currentTarget).attr("value",d);$(a.currentTarget).find("img").on("load",function(){$(".wload[varindex='"+b+"']");$(".wload[varindex='"+
b+"']").css("filter","blur(0px)")});$(a.currentTarget).find("img").on("error",function(){$(".wload[varindex='"+b+"']").prop("src","/notauth.png");$(".wload[varindex='"+b+"']").css("filter","blur(0px)")});$(a.currentTarget).find("img").css("filter","blur(5px)");1==isTableauPublic()?$(a.currentTarget).find("img").prop("src",d):$(a.currentTarget).find("img").prop("src",d+".png");initFilterRepo();a=JSON.parse(getRepoVal("filter","filter").replaceAll("'",'"'));a[parseInt(b)]=[];saveToRepo("filter","filter",
JSON.stringify(a));saveTemplateSettings();$(".filtertcont"+b).html('<i varindex="'+b+'" title="Refresh Filter List" onclick="refreshFilters(event,\''+b+'\')" class="refreshFilterIcon fas fa-sync-alt"></i>');setTimeout(function(){refreshFilters(null,parseInt(b))},4E3);$(".deleteViewCont[varindex='"+b+"']").show();"undefined"!=c.split("#!")[3]&&"true"==c.split("#!")[3]&&$(".warningCont[varindex='"+b+"']").show();$("input.viewName[varindex='"+b+"']").prop("value",c.split("#!")[1])}
function storeViz(a,b,c){var d=null==localStorage.getItem(a)?{vizzes:[]}:JSON.parse(localStorage.getItem(a)),e=-1;d.vizzes.map(function(a,c){a.vizID==b&&(e=c)});-1!=e?d.vizzes[e]={vizID:b,vizURL:c}:d.vizzes.push({vizID:b,vizURL:c});localStorage.setItem(a,JSON.stringify(d))}
function initPicker(a,b){$("#"+a).css("color",contrastFontColor(b));var c=Pickr.create({el:"#"+a,theme:"nano",useAsButton:!0,default:b,showAlways:!0,i18n:{"btn:save":"OK"},swatches:"rgba(244, 67, 54, 1);rgba(0, 165, 81, 1);rgba(233, 30, 99, 0.95);rgba(156, 39, 176, 0.9);rgba(103, 58, 183, 0.85);rgba(63, 81, 181, 0.8);rgba(33, 150, 243, 0.75);rgba(3, 169, 244, 0.7);rgba(0, 188, 212, 0.7);rgba(0, 150, 136, 0.75);rgba(76, 175, 80, 0.8);rgba(76, 175, 80, 0.8);rgba(205, 220, 57, 0.9);rgba(255, 235, 59, 0.95);rgba(255, 193, 7, 1)".split(";"),components:{preview:!0,
opacity:!0,hue:!0,interaction:{input:!0,cancel:!0,save:!0}}}).on("save",function(b){$("#"+a).css("background-color",b.toRGBA().toString(0));$("#"+a).css("color",contrastFontColor(b.toHEXA().toString(0)));$("#"+a).prop("value",b.toHEXA().toString(0));c.hide()}).on("init",function(a){a.hide()}).on("cancel",function(a){c.hide()});$("#"+a).on("focus",function(a){pickers.forEach(function(a){1==a.picker.isOpen()&&($("#"+a.id).css("background-color",a.picker.getColor().toRGBA().toString(0)),$("#"+a.id).css("color",
contrastFontColor(a.picker.getColor().toHEXA().toString(0))),$("#"+a.id).prop("value",a.picker.getColor().toHEXA().toString(0)),a.picker.hide())});c.show()});$("#"+a).on("change",function(a){var b=$(a.currentTarget).val();$(a.currentTarget).css("background-color",b);$(a.currentTarget).css("color",contrastFontColor(b));c.setColor(b)});pickers.push({id:a,picker:c})}
function collapseDetailsPanelAuto(){$("details.top").click(function(a){$("details.top").not(this).removeAttr("open")});$("details.scn").click(function(a){$("details.scn").not(this).removeAttr("open")})}function getRepoVal(a,b){return localStorage.getItem(a+"---"+currentTemplate+"-"+b)}function checkRepoKeyExist(a,b){return null!=localStorage.getItem(a+"---"+currentTemplate+"-"+b)&&"undefined"!=typeof localStorage.getItem(a+"---"+currentTemplate+"-"+b)}
function saveToRepo(a,b,c){localStorage.setItem(a+"---"+currentTemplate+"-"+b,c)}
function parseForCSSVar(a){var b=[];[].slice.call(a.styleSheets).reduce(function(a,d){try{if(d.cssRules)return a+[].slice.call(d.cssRules).reduce(function(a,c){if(":root"==c.selectorText)for(a=c.cssText.split("{"),a=a[1].replace("}","").split(";"),c=0;c<a.length;c++){var d=a[c].split(":");if(2==d.length&&1==d[0].indexOf("--")){var e=d[0].replaceAll(" ","");d=d[1].replaceAll(" ","");checkRepoKeyExist("color",e)?b.push({variable:e,value:getRepoVal("color",e)}):b.push({variable:e,value:d})}}},"")}catch(e){}},
"");return b}function parseForFilters(a,b){if(a.tab_all_filters)return a.tab_all_filters[b]&&a.tab_all_filters[b].viz?(checkRepoKeyExist("filter","filter")&&a.tab_all_filters[b].filters.map(function(c){c.isChecked=!1;a.tab_filter[b].map(function(a){c.getFieldName()==a&&(c.isChecked=!0)})}),a.tab_all_filters[b]):null;alert("this template has no 'tab_all_filters' global variable");return null}
function parseForParameters(a,b){if(a.tab_all_params)return a.tab_all_params[b]&&a.tab_all_params[b].viz?(checkRepoKeyExist("parameter","parameter")&&a.tab_all_params[b].parameters.map(function(c){c.isChecked=!1;a.tab_param[b].map(function(a){c.getName()==a&&(c.isChecked=!0)})}),a.tab_all_params[b]):null;alert("this template has no 'tab_all_params' global variable");return null}
function parseForViews(a){if(a.tab_server)return checkRepoKeyExist("view","view")?getRepoVal("view","view").split(","):a.tab_server;alert("this template has no 'tab_server' global variable");return null}
function parseForText(a){var b=[];a=a.getElementsByClassName("editable");for(var c=0;c<a.length;c++)if(!$(a[c]).is("script")){var d=$(a[c]).clone().children().remove().end()[0].innerHTML.trim().replaceAll('"',"'").split("\n")[0]+" ";""!=d&&(checkRepoKeyExist("text",a[c].id)?b.push({variable:a[c].id,text:getRepoVal("text",a[c].id)}):b.push({variable:a[c].id,text:d}))}return b}
function parseForImage(a){var b=[];a=a.getElementsByClassName("img-editable");for(var c=0;c<a.length;c++){var d=$(a[c]);"undefined"!=typeof d.prop("src")&&""!=d.prop("src")&&(checkRepoKeyExist("img",d.prop("src"))?b.push({variable:a[c].id,text:getRepoVal("img",d.prop("src"))}):b.push({variable:d.prop("id"),img:d.prop("src")}))}return b}function getMaxLoadedPage(){var a=0;$(".searchres").each(function(b,c){b=$(c).attr("page");a=Math.max(a,parseInt(b))});return a}
function isAllPageLoaded(){return getMaxLoadedPage()==getMinAllPages()}function getMinAllPages(){var a=1E5;$(".searchres").each(function(b,c){b=$(c).attr("pages");a=Math.min(a,parseInt(b))});return a}
function addSearchListener(){$("#modal-pict-content").on("scroll",function(a){a=$("#modal-pict-content").scrollTop();var b=$("#modal-pict-content").prop("scrollHeight");a==b-$("#modal-pict-content").height()&&getMaxLoadedPage()+1<=getMinAllPages()&&fetch("/pict?page="+(getMaxLoadedPage()+1)+"&search="+curSearch).then(function(a){return a.text()}).then(function(a){$("#modal-pict-content").append(a);$(".searchres").attr("varc",curSearchVarC);$(".searchres").on("click",function(a){$(".searchres").removeClass("selected");
$(a.currentTarget).addClass("selected")})})});$(".searchpict").on("keyup",function(a){if("Enter"===a.key||13===a.keyCode)curSearch=encodeURIComponent($(a.currentTarget).val()),curSearchVarC=$(a.currentTarget).attr("varc"),$("#modal-pict-content").empty(),maxp=1,showModal("modal-pict"),fetch("/pict?search="+encodeURIComponent($(a.currentTarget).val())).then(function(a){return a.text()}).then(function(b){$("#modal-pict-content").empty();$("#modal-pict-content").append(b);$(".searchres").attr("varc",
$(a.currentTarget).attr("varc"));$(".searchres").on("click",function(a){$(".searchres").removeClass("selected");$(a.currentTarget).addClass("selected")})})})}
function refreshFilters(a,b){a&&(a.stopPropagation(),a.preventDefault());document.getElementById("template").contentWindow.loadVizByIndex(parseInt(b));$(".refreshFilterIcon[varindex='"+b+"']").addClass("spin");setTimeout(function(){var a=""+getParamDom(b);a+=getFilterDom(b,a);$(".filtertcont"+b).html(a);$(".refreshFilterIcon[varindex='"+b+"']").removeClass("spin");$(".refreshFilterIcon[varindex='"+b+"']").hide()},1E4)}
function getFilterDom(a,b,c){var d="",e=parseForFilters(document.getElementById("template").contentWindow,a);""==b&&null==e&&(d='<i varindex="'+a+'" style="'+(""==c?"display:none":"")+'" title="Refresh Filter List" onclick="refreshFilters(event,\''+a+'\')" class="refreshFilterIcon fas fa-sync-alt"></i>');null!=e&&e.filters.map(function(b){if("categorical"==b.getFilterType()&&-1==b.getFieldName().indexOf("Action (")&&-1==b.getFieldName().indexOf("Measure Names")){var c=getRepoVal("text","Filter-text-"+
b.getFieldName());c=null!=c?c:b.getFieldName();c='<input varindex="'+a+'" dumid="'+b.getFieldName().replace(/[^a-z0-9+]+/gi,"_")+'" varc="'+b.getFieldName()+'" class="filterText '+(1==b.isChecked?"":"hideFilterInput")+' texts input input_settings" required="true" value="'+decodeURIComponent(c)+'"></input>';d+='<li class="filter'+a+'">\n                        <input onchange="$(\'.filterText[dumid='+b.getFieldName().replace(/[^a-z0-9+]+/gi,"_")+']\').toggle(\'hideFilterInput\')" class="filter-entry" varindex="'+
a+'" varc="'+b.getFieldName()+'" type="checkbox" '+(1==b.isChecked?"checked":"")+"> \n                        "+b.getFieldName()+" ("+b.getWorksheet().getName()+")\n                        "+c+"\n                        </li>"}});return d}
function getParamDom(a){var b="",c=parseForParameters(document.getElementById("template").contentWindow,a);null!=c&&c.parameters.map(function(c){if("list"==c.getAllowableValuesType()){var d=getRepoVal("text","Filter-text-"+c.getName());d=null!=d?d:c.getName();d='<input varindex="'+a+'" dumid="'+c.getName().replace(/[^a-z0-9+]+/gi,"_")+'" varc="'+c.getName()+'" class="filterText '+(1==c.isChecked?"":"hideFilterInput")+' texts input input_settings" required="true" value="'+decodeURIComponent(d)+'"></input>';
b+='<div class="filter'+a+'">\n                        <li onchange="$(\'.filterText[dumid='+c.getName().replace(/[^a-z0-9+]+/gi,"_")+"]').toggle('hideFilterInput')\" class=\"param"+a+'">\n                          <input class="param-entry" varindex="'+a+'" varc="'+c.getName()+'" type="checkbox" '+(1==c.isChecked?"checked":"")+"> "+c.getName()+" (Parameter)\n                        </li>\n                      "+d+"\n                      </div>"}});return b}
function reconstructPublicViewThumb(a){a=a.split("?")[0];a=a.split("https://public.tableau.com/views/");a="https://public.tableau.com/static/images/"+a[1].substring(0,2)+"/"+a[1]+"/4_3";console.log(a);return a}
function populateViewsSettings(){$("#viewlist").empty();$("#viewlist").append("<summary>Views Settings</summary>");parseForViews(document.getElementById("template").contentWindow).map(function(a,b){var c=""+getParamDom(b);$("#viewlist").append('<details id="view'+b+'"></details>');c+=getFilterDom(b,c,a);$("#view"+b).append("<summary>View "+(b+1));var d=-1!=a.indexOf("https://public.tableau.com/"),e="";""!=a?(e=a+".png",d&&(e=reconstructPublicViewThumb(a)+".png")):e="/newView.png";a='\n    <div ondrop="drop(event)" ondragover="allowDrop(event)" varindex="'+
b+'" varc="'+a+'" value="'+a+'" class="views vplace">\n      <img class="wload" varindex="'+b+'" height="260px" width="380px" src="'+e+'" >\n      <div style="'+(""==a?"display:none":"true"==getRepoVal("warnings",b)?"":"display:none")+'" varindex="'+b+'" class="warningCont"><i title="'+WARNTABS+'" class="warning fas fa-exclamation-triangle"></i></div>\n      <div style="'+(""==a?"display:none":"")+'" varindex="'+b+'" class="deleteViewCont"><i title="Clear this View" onclick="clearAView(\''+b+'\')" class="deleteView fas fa-trash-alt"></i></div>\n      </summary>\n      <div class="filterboxes">\n        <details class="scn" open>\n          <summary class="tpb">View Name:</summary>\n          <input varindex="'+
b+'" varc="" class="viewName texts input input_settings" value="">\n        </details>  \n        <details class="scn">\n          <summary class="tpb">Filters:</summary>\n          <ul class="filtertcont'+b+'">\n            '+c+'\n          </ul>\n        </details>\n\n        <details class="scn">\n          <summary class="tpb">Web Edit:</summary>\n          <input class="webedit" varindex="'+b+'" type="checkbox" '+("true"==getRepoVal("webedit",b)?"checked":"")+'> <label> Activated</label>\n        </details>\n\n        <details class="scn">\n          <summary class="tpb">Ask Data:</summary>\n          <input class="askdata" varindex="'+
b+'" type="text" placeholder="Type URL Here..." value="'+(""==getRepoVal("askdata",b)||null==getRepoVal("askdata",b)?"":getRepoVal("askdata",b))+'">\n        </details>\n        \n        <details class="scn">\n          <summary class="tpb">Actions:</summary>\n          <input class="action" varindex="'+b+'" type="checkbox" '+("true"==getRepoVal("action",b)?"checked":"")+"> <label> Activated</label>\n        </details>\n\n      </div>\n    </div>\n    ";$("#view"+b).append(a);$("#view"+b).find("img.wload").on("error",
function(){$(".wload[varindex='"+b+"']").prop("src","/notauth.png")})})}
function showTemplateSettings(a){a.stopPropagation();1!=$(panelSet).is(":visible")&&($(".pcr-app").remove(),createSettingsPanel(),pickers=[],populateViewsSettings(),$("#imglist").empty(),$("#imglist").append("<summary>Images Settings</summary>"),parseForImage(document.getElementById("template").contentWindow.document).map(function(a){var b=capitalizeIt(a.variable.replace(currentTemplate+"-","").replaceAll("-"," "));a='\n    <div  class="settings_block pictsettings">\n        <i onclick="highlightElement(\''+a.variable.replace(currentTemplate+
"-","")+'\')" class="fas target fa-bullseye"></i> <label class="label_settings">'+b+' </label>\n        <div class="picgroup">\n          <input varc="'+a.variable+'" class="imgs input input_settings searchpict" required="true" placeholder="Search for images or paste url below...">\n          <input varc="'+a.variable+'" class="imgs input input_settings sh" required="true" value="'+a.img+'">\n        </div>\n    </div>\n    ';$("#imglist").append(a)}),addSearchListener(),$("#colorlist").empty(),$("#colorlist").append("<summary>Colour & UI Settings</summary>"),
parseForCSSVar(document.getElementById("template").contentWindow.document).map(function(a,c){var b='\n    <div class="settings_block">\n      <label class="label_settings">'+a.variable.replaceAll("-"," ")+' </label>\n      <input varc="'+a.variable+'" style="background-color:'+(-1!=a.variable.indexOf("--ui")?"white":a.value)+';" id="color'+c+'" class="color input input_settings" required="true" value="'+a.value+'">\n    </div>\n    ';$("#colorlist").append(b);-1==a.variable.indexOf("--ui")&&initPicker("color"+
c,a.value)}),$("#textlist").empty(),$("#textlist").append("<summary>Text Settings</summary>"),parseForText(document.getElementById("template").contentWindow.document).map(function(a){var b="",d=(new RegExp(/Viz-([0-9-]+)-text/)).exec(a.variable);null!=d?($(".viewName[varindex='"+(parseInt(d[1])-1)+"']").prop("value",decodeURIComponent(a.text)),$(".viewName[varindex='"+(parseInt(d[1])-1)+"']").attr("varc",a.variable)):-1==a.variable.indexOf("Filter-text-")&&(b='\n    <div  class="settings_block">\n        <i onclick="highlightElement(\''+
a.variable.replace(currentTemplate+"-","")+'\')" class="fas target fa-bullseye"></i><label class="label_settings">'+a.variable.replace(currentTemplate+"-","").replaceAll("-"," ")+' </label>\n        <input varc="'+a.variable+'" class="texts input input_settings" required="true" value="'+decodeURIComponent(a.text)+'">\n    </div>\n    ');$("#textlist").append(b)}),collapseDetailsPanelAuto())}
function initFilterRepo(){var a=JSON.parse(null==getRepoVal("filter","filter")?null:getRepoVal("filter","filter").replaceAll("'",'"'));null==a&&(a=[],$("#viewlist .views").each(function(b,c){a.push([])}),saveToRepo("filter","filter",JSON.stringify(a)))}
function initParamRepo(){var a=JSON.parse(null==getRepoVal("parameter","parameter")?null:getRepoVal("parameter","parameter").replaceAll("'",'"'));null==a&&(a=[],$("#viewlist .views").each(function(b,c){a.push([])}),saveToRepo("parameter","parameter",JSON.stringify(a)))}
function saveTemplateSettings(a){initParamRepo();var b=JSON.parse(getRepoVal("parameter","parameter").replaceAll("'",'"')),c=[];$("#viewlist .param-entry").each(function(a,d){$(d).prop("checked")&&(c[parseInt($(d).attr("varindex"))]||(c[parseInt($(d).attr("varindex"))]=[]),c[parseInt($(d).attr("varindex"))].push($(d).attr("varc")));c[parseInt($(d).attr("varindex"))]?b[parseInt($(d).attr("varindex"))]=c[parseInt($(d).attr("varindex"))]:b[parseInt($(d).attr("varindex"))]=[]});JSON.stringify(b)!=getRepoVal("parameter",
"parameter").replaceAll("'",'"')&&(viewsModified=!0);saveToRepo("parameter","parameter",JSON.stringify(b));initFilterRepo();var d=JSON.parse(getRepoVal("filter","filter").replaceAll("'",'"'));c=[];$("#viewlist .filter-entry").each(function(a,b){$(b).prop("checked")&&(c[parseInt($(b).attr("varindex"))]||(c[parseInt($(b).attr("varindex"))]=[]),c[parseInt($(b).attr("varindex"))].push($(b).attr("varc")));c[parseInt($(b).attr("varindex"))]?d[parseInt($(b).attr("varindex"))]=c[parseInt($(b).attr("varindex"))]:
d[parseInt($(b).attr("varindex"))]=[]});JSON.stringify(d)!=getRepoVal("filter","filter").replaceAll("'",'"')&&(viewsModified=!0);saveToRepo("filter","filter",JSON.stringify(d));$(".page-content").css("opacity","0.3");$("#viewlist .warningCont").each(function(a,b){saveToRepo("warnings",a,$(b).is(":visible"))});$("#viewlist .askdata").each(function(a,b){b=$(b).prop("value");getRepoVal("askdata",a)!=b&&(viewsModified=!0);saveToRepo("askdata",a,b)});restoreAskData();$("#viewlist .webedit").each(function(a,
b){b=1==b.checked?"true":"false";getRepoVal("webedit",a)!=b&&(viewsModified=!0);saveToRepo("webedit",a,b)});restoreWebEdit();$("#viewlist .action").each(function(a,b){b=1==b.checked?"true":"false";getRepoVal("action",a)!=b&&(viewsModified=!0);saveToRepo("action",a,b)});restoreAction();var e=[];$("#viewlist .views").each(function(a,b){e.push($(b).attr("value"))});saveToRepo("view","view",e);$("#colorlist .color").each(function(a,b){try{document.getElementById("template").contentWindow.document.documentElement.style.setProperty($(b).attr("varc"),
$(b).prop("value"))}catch(k){console.log("err",$(b).attr("varc"),$(b).prop("value"))}saveToRepo("color",$(b).attr("varc"),$(b).prop("value"));restoreColorInIframes({key:$(b).attr("varc"),val:$(b).prop("value")})});$("#textlist .texts").each(function(a,b){saveToRepo("text",$(b).attr("varc"),encodeURIComponent($(b).prop("value")))});$("#viewlist .texts:not(.filterText)").each(function(a,b){saveToRepo("text",$(b).attr("varc"),encodeURIComponent($(b).prop("value")));restoreTexts()});$("#viewlist .filterText").each(function(a,
b){a=$(b.parentElement).find(".filter-entry[varc='"+$(b).attr("varc")+"']").prop("checked");var c=$(b.parentElement).find(".param-entry[varc='"+$(b).attr("varc")+"']").prop("checked");if(1==a||1==c)saveToRepo("text","Filter-text-"+$(b).attr("varc"),encodeURIComponent($(b).prop("value"))),restoreTexts()});$("#imglist .imgs").each(function(a,b){saveToRepo("img",$(b).attr("varc"),$(b).prop("value"));restoreImgs()});a&&closeSettings();1==viewsModified?(switchTemplate(currentTemplate),viewsModified=!1):
$(".page-content").css("opacity","1")}
function clearAView(a){parseForViews(document.getElementById("template").contentWindow)[a]="";$(".filtertcont"+a+" *:not('.refreshFilterIcon')").remove();$(".webedit[varindex='"+a+"']").prop("checked",!1);$(".action[varindex='"+a+"']").prop("checked",!1);$(".askdata[varindex='"+a+"']").prop("value","");$(".viewName[varindex='"+a+"']").prop("value","Viz "+(parseInt(a)+1));$(".vplace[varindex='"+a+"']").attr("value","");$(".vplace[varindex='"+a+"']").attr("varc","");$(".wload[varindex='"+a+"']").prop("src",
"/newView.png");$(".deleteViewCont[varindex='"+a+"']").hide();$(".refreshFilterIcon[varindex='"+a+"']").hide();viewsModified=!0}function restoreAction(){var a=getStorageByType("action");a&&a.map(function(a){document.getElementById("template").contentWindow.tab_action[parseInt(a.key)]=a})}function restoreWebEdit(){var a=getStorageByType("webedit");a&&a.map(function(a){document.getElementById("template").contentWindow.tab_web[parseInt(a.key)]=a})}
function restoreAskData(){var a=getStorageByType("askdata");a&&a.map(function(a){document.getElementById("template").contentWindow.tab_ask[parseInt(a.key)]=a})}function restoreParameters(){var a=getStorageByType("parameter");a&&a[0]&&0<JSON.parse(a[0].val.replaceAll("'",'"')).length&&(document.getElementById("template").contentWindow.tab_param=JSON.parse(a[0].val.replaceAll("'",'"')))}
function restoreFilters(){var a=getStorageByType("filter");a&&a[0]&&0<JSON.parse(a[0].val.replaceAll("'",'"')).length&&(document.getElementById("template").contentWindow.tab_filter=JSON.parse(a[0].val.replaceAll("'",'"')))}
function restoreColorInIframes(a){var b=document.getElementById("template").contentWindow.document.getElementsByTagName("iframe");Array.prototype.slice.call(b).forEach(function(b){try{b.contentWindow.document.documentElement.style.setProperty(a.key,a.val)}catch(d){console.log(d)}})}
function restoreViews(){var a=getStorageByType("view");0<a.length&&(a=a[0].val.split(","),document.getElementById("template").contentWindow.tab_server=a,document.getElementById("template").contentWindow.loadVizInit(!0))}function restoreImgs(){getStorageByType("img").map(function(a){$(document.getElementById("template").contentWindow.document.getElementById(a.key)).prop("src",a.val)})}
function restoreTexts(){getStorageByType("text").map(function(a){document.getElementById("template").contentWindow.document.getElementById(a.key)&&(document.getElementById("template").contentWindow.document.getElementById(a.key).innerHTML=decodeURIComponent(a.val))})}function restoreColors(){getStorageByType("color").map(function(a){document.getElementById("template").contentWindow.document.documentElement.style.setProperty(a.key,a.val);restoreColorInIframes(a)})}
function getStorageByType(a){var b=[];a=a+"---"+currentTemplate+"-";for(var c=0;c<localStorage.length;c++)-1!=localStorage.key(c).indexOf(a)&&b.push({key:localStorage.key(c).replace(a,""),val:localStorage.getItem(localStorage.key(c))});return b}
function restoreViz(){setTimeout(function(){isTemplateLoaded=setInterval(function(){"undefined"!=typeof document.getElementById("template").contentWindow.loadVizInit&&(clearInterval(isTemplateLoaded),setTimeout(function(){restoreColors();restoreTexts();restoreImgs();restoreFilters();restoreViews();restoreFilters();restoreParameters();restoreWebEdit();restoreAskData();restoreAction()},500),$(".page-content").css("opacity","1"))},500)},1100)}
function highlightElement(a){injectStyle(document.getElementById("template").contentWindow.document);$("#modal-tpset").animate({opacity:0},300);var b=$(document.getElementById("template").contentWindow.document.getElementById(a));b.addClass("blk");setTimeout(function(){b.removeClass("blk");setTimeout(function(){$("#modal-tpset").animate({opacity:1},300)},1E3)},2E3)}
function injectStyle(a){null==a.getElementById("injectStyleH")&&(head=a.head||a.getElementsByTagName("head")[0],style=a.createElement("style"),style.id="injectStyleH",head.appendChild(style),style.type="text/css",style.styleSheet?style.styleSheet.cssText=" .blk {\n      animation-duration: 400ms;\n      animation-name: blink;\n      animation-iteration-count: infinite;\n      animation-direction: alternate;\n      }\n      @keyframes blink {\n          from {\n            opacity: 1;\n          }\n          to {\n            opacity: 0;\n          }\n        }":
style.appendChild(a.createTextNode(" .blk {\n      animation-duration: 400ms;\n      animation-name: blink;\n      animation-iteration-count: infinite;\n      animation-direction: alternate;\n      }\n      @keyframes blink {\n          from {\n            opacity: 1;\n          }\n          to {\n            opacity: 0;\n          }\n        }")))}function getCurrentServerInfo(){return{host:localStorage.getItem("SERVER_URL"),site:localStorage.getItem("SITE_NAME")}}
function filterViewList(a){if(isTableauPublic())"Enter"==a.key&&(searchPublic(),$(".tb").empty());else{var b=$("#search").val().toUpperCase();""!=b?($(".pdropdown .badge").addClass("badge-warning"),$(".vdropdown .badge").addClass("badge-warning"),$(".wbdropdown .badge").addClass("badge-warning")):($(".pdropdown .badge").removeClass("badge-warning"),$(".vdropdown .badge").removeClass("badge-warning"),$(".wbdropdown .badge").removeClass("badge-warning"));var c=0,d=0,e=0;$(".proj").each(function(a,d){-1!=
$(d).find(".thumb_text").text().toUpperCase().indexOf(b)?($(d).show(),c+=1):$(d).hide()});$(".wkb").each(function(a,c){-1!=$(c).find(".thumb_text").text().toUpperCase().indexOf(b)?($(c).show(),e+=1):$(c).hide()});$(".vie").each(function(a,c){-1!=$(c).find(".thumb_text").text().toUpperCase().indexOf(b)?($(c).show(),d+=1):$(c).hide()});$(".pnum").text(c);$(".vnum").text(d);$(".wbnum").text(e)}}
function closeSettings(){try{panelSet&&panelSet.close(),pickers.forEach(function(a){return a.picker.hide()})}catch(a){}}
function createSettingsPanel(){$("body").append(getSettingsTemplate());collapseDetailsPanelAuto();var a=document.getElementById("settings");panelSet=jsPanel.create({content:a,headerControls:"closeonly md",contentSize:{width:"740px",height:"500px"},contentOverflow:"hidden",headerTitle:"TEMPLATE SETTINGS",theme:"#31353D",onclosed:function(a,c){pickers.forEach(function(a){return a.picker.hide()})}})}
function getSettingsTemplate(){return' <main class="" id="settings" style="height:100%;width: 100%;">\n  <div class="setblock">\n    <details class="top" id="viewlist" open>\n\n    </details>\n    <details class="top" id="textlist">\n        \n    </details>\n    <details class="top" id="imglist">\n        \n    </details>\n    <details class="top" id="colorlist">\n      \n    </details>\n</div>\n  <footer class="setfooter">\n    <button class="modal__btn modal__btn-primary" onclick="saveTemplateSettings(true)"> Close </button>\n    <button class="modal__btn modal__btn-primary" onclick="saveTemplateSettings()"> Apply </button>\n    <button onclick="closeSettings()" class="gogo modal__btn" data-micromodal-close aria-label="Close">Cancel</button>\n  </footer>\n</main>'}
function getBase64Image(a){var b=document.createElement("canvas");b.width=a.width;b.height=a.height;b.getContext("2d").drawImage(a,0,0);a=b.toDataURL("image/png");document.body.appendChild(b);return a.replace(/^data:image\/(png|jpg);base64,/,"")}function trimURL(a){return a.replace(/\/$/,"")}function titleCase(a){a=a.toLowerCase().split(" ");for(var b=0;b<a.length;b++)a[b]=a[b].charAt(0).toUpperCase()+a[b].substring(1);return a.join(" ")}
function contrastFontColor(a){"#"===a.slice(0,1)&&(a=a.slice(1));3===a.length&&(a=a.split("").map(function(a){return a+a}).join(""));var b=parseInt(a.substr(0,2),16),c=parseInt(a.substr(2,2),16);a=parseInt(a.substr(4,2),16);return 128<=(299*b+587*c+114*a)/1E3?"black":"white"}
function exportTemplate(a){var b=getStorageByType("webedit"),c=getStorageByType("askdata"),d=getStorageByType("parameter"),e=getStorageByType("filter"),f=getStorageByType("view"),g=getStorageByType("img"),k=getStorageByType("text"),h=getStorageByType("color"),l=getStorageByType("widget"),m=getStorageByType("action");b={title:a.replaceAll(".zip",""),widget:JSON.stringify(l),tpname:currentTemplate.replace("templates/","").replace("/index.html",""),view:JSON.stringify(f),filter:JSON.stringify(e),parameter:JSON.stringify(d),
webedit:JSON.stringify(b),askdata:JSON.stringify(c),text:JSON.stringify(k),img:JSON.stringify(g),color:JSON.stringify(h),action:JSON.stringify(m)};b=formize(b);fetch("/zip",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:b}).then(function(a){return a.blob()}).then(function(b){saveFile(b,a.replaceAll(".zip","")+".zip")})}
function saveFile(a,b){if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(a,b);else{var c=document.createElement("a");document.body.appendChild(c);var d=window.URL.createObjectURL(a);c.href=d;c.download=b;c.click();setTimeout(function(){window.URL.revokeObjectURL(d);document.body.removeChild(c)},0)}}function selectedPict(){var a=$(".searchres.selected"),b=a.prop("src");$(".imgs.input.sh[varc='"+a.attr("varc")+"']").val(b);MicroModal.close("modal-pict")}
function capitalizeIt(a){var b=a.toLowerCase();return a.charAt(0).toUpperCase()+b.slice(1)}
function togglePublic(){$(".vdropdown").removeClass("active");$(".vdropsub").hide();$("#search").val("");$(".tol-section").toggle();if(isTableauPublic())$(".loadp").show(),$(".loadwb").show(),$("#search").prop("placeholder","Search in Public...");else{if(0==checkSettings()){showSettings();$(".tol-section").toggle();$(".tabpub input").prop("checked",!0);return}getProjects();$("#search").prop("placeholder","Search...");$(".pdropdown .badge").removeClass("badge-warning");$(".vdropdown .badge").removeClass("badge-warning");
$(".wbdropdown .badge").removeClass("badge-warning")}$(".vnum").text("");$(".pnum").text("");$(".wbnum").text("");$(".tb").empty();var a=new Event("resize");a.fake=!0;window.dispatchEvent(a)}function isTableauPublic(){return!$(".tol-section").is(":visible")}
function cleanURLBadChar(a){a=a.replaceAll(" ","").replaceAll("#","").replaceAll("/","").replaceAll("?","").replaceAll(",","").replaceAll("&","").replaceAll(":","").replaceAll("(","").replaceAll(")","").replaceAll(".","_").replaceAll('"',"");return trickyReplace(a)}
function trickyReplace(a){var b=new Map([["a","\u00e1|\u00e0|\u00e3|\u00e2|\u00e4"],["e","\u00e9|\u00e8|\u00ea|\u00eb"],["i","\u00ed|\u00ec|\u00ee|\u00ef"],["o","\u00f3|\u00f2|\u00f4|\u00f5|\u00f6"],["u","\u00fa|\u00f9|\u00fb|\u00fc"],["c","\u00e7"],["n","\u00f1"]]);return[].concat($jscomp.arrayFromIterable(b)).reduce(function(a,d){d=$jscomp.makeIterator(d).next().value;return a.replace(new RegExp(b.get(d),"gi"),"")},a)}
function searchPublic(a){a=void 0===a?0:a;$(".loadmr").css("display","inline-block");$(".loadview").show();$(".loadmore span").text("");$(".vnum").text("");console.log("search public");fetch("/public?search="+encodeURIComponent($("#search").val())+"&start="+a).then(function(a){return a.json()}).then(function(a){$(".loadmore").remove();$(".tb").show();var b=[];a.results.map(function(a){b.push({url:"https://public.tableau.com/static/images/"+a.workbook.workbookRepoUrl.substring(0,2)+"/"+cleanURLBadChar(a.workbook.workbookRepoUrl)+
"/"+cleanURLBadChar(a.workbook.defaultViewName)+"/4_3.png",name:a.workbook.defaultViewName.replaceAll('"',""),link:"https://public.tableau.com/views/"+a.workbook.defaultViewRepoUrl.replace("/sheets","")+"?:showVizHome=no&:embed=true"})});populateViews(b,!0);$(".vnum").text($(".thumb.vie").length+"/"+a.facets.entity_type.vizzes);a=parseInt(a.facets.entity_type.vizzes);$(".thumb.vie").length<a&&(a=$(".thumb.vie").length+1,$(".tb").append('<div class="nosel loadmore" onclick="searchPublic('+a+')"><div class="loadmr spinner-border text-success" role="status"></div><span>Load More...</span><div>'))})}
function clearAllSettings(){MicroModal.close("modal-settings");showModal("modal-confirm")}
function clearAllDamn(a){MicroModal.close("modal-confirm");if(1==a){a=localStorage.getItem("VERSION");var b=localStorage.getItem("SERVER_URL"),c=localStorage.getItem("SITE_NAME"),d=localStorage.getItem("TOKEN_NAME"),e=localStorage.getItem("TOKEN_VALUE"),f=localStorage.getItem("WARN");localStorage.clear();localStorage.setItem("VERSION",a);localStorage.setItem("SERVER_URL",b);localStorage.setItem("SITE_NAME",c);localStorage.setItem("TOKEN_NAME",d);localStorage.setItem("TOKEN_VALUE",e);localStorage.setItem("WARN",
f);reloadMe(!0)}}function openExportOptions(a){a.stopPropagation();showModal("modal-export");$(".gogo").focus();$("#exportname").val(friendlyTpName[currentTemplate]+".zip")}function exportOptions(a){MicroModal.close("modal-export");1==a&&(exportTemplate($("#exportname").val()),setTimeout(function(){$("#exportconf").prop("checked")&&saveToFile($("#exportname").val())},1E3))}
String.prototype.hashCode=function(){var a=0,b;if(0===this.length)return a;for(b=0;b<this.length;b++){var c=this.charCodeAt(b);a=(a<<5)-a+c;a|=0}return a};